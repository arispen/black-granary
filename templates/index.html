{{ define "index" }}
{{ template "header" . }}
  <div class="layout">
  <div>
    <div id="dashboard"
      hx-get="/frag/dashboard"
      hx-trigger="every 5s"
      hx-target="#dashboard"
      hx-swap="innerHTML">
      {{ template "dashboard" . }}
    </div>
  </div>
  <div class="stack">
    <div id="event-log" class="card"
      hx-get="/frag/events"
      hx-trigger="every 5s"
      hx-target="#event-log"
      hx-swap="innerHTML">
      {{ template "events_inner" . }}
    </div>
    <div id="chat" class="card"
      hx-get="/frag/chat"
      hx-trigger="every 2s[document.activeElement == null || document.activeElement.id !== 'chat-input']"
      hx-target="#chat"
      hx-swap="innerHTML">
      {{ template "chat_inner" . }}
    </div>
    <div id="players" class="card"
      hx-get="/frag/players"
      hx-trigger="every 5s"
      hx-target="#players"
      hx-swap="innerHTML">
      {{ template "players_inner" . }}
    </div>
    <div id="institutions" class="card"
      hx-get="/frag/institutions"
      hx-trigger="every 5s"
      hx-target="#institutions"
      hx-swap="innerHTML">
      {{ template "institutions_inner" . }}
    </div>
    <div id="intel" class="card"
      hx-get="/frag/intel"
      hx-trigger="every 5s[document.activeElement == null || !document.getElementById('intel') || !document.getElementById('intel').contains(document.activeElement)]"
      hx-target="#intel"
      hx-swap="innerHTML">
      {{ template "intel_inner" . }}
    </div>
    <div id="ledger" class="card"
      hx-get="/frag/ledger"
      hx-trigger="every 5s"
      hx-target="#ledger"
      hx-swap="innerHTML">
      {{ template "ledger_inner" . }}
    </div>
    <div id="market" class="card"
      hx-get="/frag/market"
      hx-trigger="every 5s"
      hx-target="#market"
      hx-swap="innerHTML">
      {{ template "market_inner" . }}
    </div>
    <div id="toast" class="toast">{{ .Toast }}</div>
  </div>
</div>
{{ end }}
